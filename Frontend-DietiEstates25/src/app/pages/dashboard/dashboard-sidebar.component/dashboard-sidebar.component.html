<aside class="sidebar" [class.collapsed]="collapsed">
    <div class="profile">
      <div class="profile-avatar">{{ userInitials }}</div>
      @if (!collapsed) {
        <div class="profile-meta">
          <div class="profile-name">{{ userName }}</div>
          <div class="profile-role">{{ userRole }}</div>
        </div>
      }
    </div>
  
    <nav class="menu">
      @for (item of menu(); track item.route) {
        <a
          class="menu-item"
          [routerLink]="item.route"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <span class="ico">{{ item.icon }}</span>
          @if (!collapsed) {
            <span class="lbl">{{ item.label }}</span>
          }
          @if (!collapsed && item.badge) {
            <span class="badge">{{ item.badge }}</span>
          }
          @if (!collapsed && !item.badge) {
            <span class="chev">â€º</span>
          }
        </a>
      }
    </nav>
  
    <div class="sidebar-footer">
      <button class="footer-btn" type="button" (click)="openChangePasswordModal()">
        <span class="ico">ðŸ”’</span>
        @if (!collapsed) {
          <span class="lbl">Cambia Password</span>
        }
      </button>

      <button class="footer-btn" type="button" (click)="goBackToSite()">
        <span class="ico">âŒ‚</span>
        @if (!collapsed) {
          <span class="lbl">Torna al sito</span>
        }
      </button>
  
      <button class="footer-btn danger" type="button" (click)="logout()">
        <span class="ico">âŽ‹</span>
        @if (!collapsed) {
          <span class="lbl">Esci</span>
        }
      </button>
    </div>
  </aside>

<!-- Change Password Modal -->
@if (showChangePasswordModal()) {
  <app-change-password-modal
    (close)="closeChangePasswordModal()"
    (save)="onPasswordChange($event)"
  />
}
