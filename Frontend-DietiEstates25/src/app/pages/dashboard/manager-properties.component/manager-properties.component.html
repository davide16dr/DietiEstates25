<div class="manager-properties">
  <!-- Header -->
  <section class="header">
    <div>
      <h1>Gestione Immobili</h1>
      <p>Visualizza e gestisci tutti gli immobili dell'agenzia</p>
    </div>
  </section>

  <!-- Stats -->
  <section class="stats">
    <div class="stat-card">
      <div class="stat-icon" style="background: #eef2ff;">ğŸ </div>
      <div class="stat-info">
        <div class="stat-value">{{ stats.totali }}</div>
        <div class="stat-label">Immobili Totali</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: #e9f7ef;">âœ“</div>
      <div class="stat-info">
        <div class="stat-value">{{ stats.disponibili }}</div>
        <div class="stat-label">Disponibili</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: #fef3c7;">ğŸ’°</div>
      <div class="stat-info">
        <div class="stat-value">{{ stats.venduti }}</div>
        <div class="stat-label">Venduti</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: #fce7f3;">ğŸ”‘</div>
      <div class="stat-info">
        <div class="stat-value">{{ stats.affittati }}</div>
        <div class="stat-label">Affittati</div>
      </div>
    </div>
  </section>

  <!-- Filters -->
  <section class="filters">
    <div class="search-box">
      <img src="assets/icons/search.png" alt="Search" class="search-icon" />
      <input
        type="text"
        placeholder="Cerca per titolo, indirizzo o agente..."
        [value]="searchQuery()"
        (input)="onSearch($event)"
      />
    </div>

    <select class="filter-select" [value]="filterStatus()" (change)="onStatusFilterChange($event)">
      <option value="tutti">Tutti gli stati</option>
      <option value="disponibile">Disponibili</option>
      <option value="venduto">Venduti</option>
      <option value="affittato">Affittati</option>
      <option value="in_trattativa">In Trattativa</option>
    </select>

    <select class="filter-select" [value]="filterType()" (change)="onTypeFilterChange($event)">
      <option value="tutti">Tutti i tipi</option>
      <option value="vendita">Vendita</option>
      <option value="affitto">Affitto</option>
    </select>
  </section>

  <!-- Properties Grid -->
  <section class="properties-grid">
    @for (property of filteredProperties; track property.id) {
      <div class="property-card">
        <div class="property-image">
          <img [src]="property.image" [alt]="property.title" />
          <span class="property-type-badge">{{ property.type }}</span>
          <span class="property-status-badge" [ngClass]="getStatusClass(property.status)">
            {{ getStatusLabel(property.status) }}
          </span>
        </div>

        <div class="property-content">
          <h3 class="property-title">{{ property.title }}</h3>
          <p class="property-address">ğŸ“ {{ property.address }}</p>

          <div class="property-features">
            <span class="feature">ğŸ›ï¸ {{ property.rooms }}</span>
            <span class="feature">ğŸš¿ {{ property.bathrooms }}</span>
            <span class="feature">ğŸ“ {{ property.surface }}mÂ²</span>
          </div>

          <div class="property-agent">
            <span class="agent-icon">ğŸ‘¤</span>
            <span>{{ property.agent }}</span>
          </div>

          <div class="property-metrics">
            <div class="metric">
              <span class="metric-icon">ğŸ‘ï¸</span>
              <span>{{ property.views }} visualizzazioni</span>
            </div>
            <div class="metric">
              <span class="metric-icon">ğŸ’¼</span>
              <span>{{ property.offers }} offerte</span>
            </div>
          </div>

          <div class="property-footer">
            <div class="property-price">{{ formatPrice(property.price, property.type) }}</div>
            <div class="property-actions">
              <button class="action-btn secondary" (click)="viewPropertyDetails(property)">
                Dettagli
              </button>
              <button class="action-btn primary" (click)="editProperty(property)">
                Modifica
              </button>
            </div>
          </div>
        </div>
      </div>
    }

    @if (filteredProperties.length === 0) {
      <div class="empty-state">
        <span class="empty-icon">ğŸ”</span>
        <h3>Nessun immobile trovato</h3>
        <p>Prova a modificare i filtri di ricerca</p>
      </div>
    }
  </section>
</div>
